(function(){YUI.add("rails-event-bubble",function(e){function c(f){var h=document.createElement("div");f="on"+f;var g=(f in h);if(!g){h.setAttribute(f,"return;");g=typeof h[f]=="function"}h=null;return g}var b=c("submit");var d="emulated:submit";if(!b){e.Event.define("submit",{on:function(h,f,g){f.onHandle=e.Event._attach(["submit",function(i){g.fire.apply(g,arguments)},h,this],{capture:true})},detach:function(g,f){f.onHandle.detach()},delegate:function(j,h,i,g){var f=e.delegate.compileFilter(g);h.delegateHandle=e.on(d,function(m){if(f(m.target,{currentTarget:j})){var l=m.details[0];var k=i.fire.apply(i,arguments);if(m.prevented){l.preventDefault()}}})},detachDelegate:function(i,g,h,f){g.delegateHandle.detach()}},true);e.one(document).delegate("focus",function(f){var g=this.ancestor("form");if(g&&!g.getData(d)){g.publish(d,{broadcast:1});g.on("submit",function(h){return g.fire(d,h)});g.setData(d,true)}},"form input, form select, form button, form textarea")}},"0.0.2",{requires:["event-delegate","event-focus","event-synthetic"]});var a=["before","after","create","complete","success","failure"];YUI.add("rails-ujs",function(d){function b(e){d.Event.define(e,{on:function(h,f,g){f.handle=d.Global.on(e,function(i){if(d.Node.getDOMNode(i.target)==d.Node.getDOMNode(h)){g.fire.apply(g,arguments)}})},detach:function(g,f){f.handle.detach()},delegate:function(j,h,i,g){var f=d.delegate.compileFilter(g);h.handle=d.Global.on(e,function(k){if(f(k.target,{currentTarget:j})){i.fire.apply(i,arguments)}})},detachDelegate:function(i,g,h,f){g.handle.detach()}},true)}for(var c=0;c<a.length;c++){b("ajax:"+a[c])}},"0.0.2",{requires:["node-base","event-synthetic"]});YUI().use("node-base","node-event-delegate","selector-css3","io-form","rails-ujs","rails-event-bubble",function(h){var g=h.one(document);g.delegate("click",function(k){var j=this.getAttribute("data-confirm");if(!(!j||confirm(j))){k.preventDefault();return false}},"a[data-confirm],input[data-confirm],button[data-confirm]");function b(o){var m=this;for(var l=0;l<a.length;l++){m.publish("ajax:"+a[l],{broadcast:2,emitFacade:true})}var k,j={};var n=m.fire("ajax:before");if(m.get("tagName").toLowerCase()==="form"){j.method=m.get("method")||"post";k=m.get("action");if(!m.get("id")){m.setAttribute("id",h.guid("remoteForm"))}j.form={id:m.get("id")}}else{j.method=m.getAttribute("data-method")||"get";k=m.get("href")}j.on={start:function(q,p){m.fire("ajax:create",{},p)},complete:function(q,p){m.fire("ajax:complete",{},p)},success:function(q,p){m.fire("ajax:success",{},p)},failure:function(q,p){m.fire("ajax:failure",{},p)}};h.io(k,j);m.fire("ajax:after");o.preventDefault()}g.delegate("submit",b,"form[data-remote]");g.delegate("click",b,"a[data-remote]");function c(k,j,l){k.insert(h.Node.create(h.Lang.sub('<input type="{type}" name="{name}" value="{value}"/>',{type:"hidden",name:j,value:l})))}function e(o){var l=this,p=l.getAttribute("data-method"),k=l.get("href"),m=h.one("meta[name=csrf-param]"),j=h.one("meta[name=csrf-token]");if(l.getAttribute("data-remote")){return}var n=h.Node.create('<form method="POST" style="display:none"></form>').setAttribute("action",k);l.get("parentNode").insert(n);if(p!=="post"){c(n,"_method",p)}if(m&&j){c(n,m.getAttribute("content"),j.getAttribute("content"))}n.submit();o.preventDefault()}g.delegate("click",e,"a[data-method]");var d="input[type=submit][data-disable-with]";function f(){this.all(d).each(function(j){j.setData("enable-with",j.get("value"));j.set("value",j.getAttribute("data-disable-with"));j.setAttribute("disabled","disabled")})}function i(){this.all(d).each(function(j){j.removeAttribute("disabled");j.set("value",j.getData("enable-with"))})}g.delegate("submit",f,"form:not([data-remote])");g.delegate("ajax:before",f,"form[data-remote]");g.delegate("ajax:complete",i,"form[data-remote]")})})();