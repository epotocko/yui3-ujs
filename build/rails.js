(function(){YUI.add("rails-event-bubble",function(e){function c(f){var h=document.createElement("div");f="on"+f;var g=(f in h);if(!g){h.setAttribute(f,"return;");g=typeof h[f]=="function"}h=null;return g}var b=c("submit");var d="emulated:submit";if(!b){e.Event.define("submit",{on:function(h,f,g){f.onHandle=e.Event._attach(["submit",function(i){g.fire.apply(g,arguments)},h,this],{capture:true})},detach:function(g,f){f.onHandle.detach()},delegate:function(j,h,i,g){var f=e.delegate.compileFilter(g);h.delegateHandle=e.on(d,function(m){if(f(m.target,{currentTarget:j})){var l=m.details[0];var k=i.fire.apply(i,arguments);if(m.prevented){l.preventDefault()}}})},detachDelegate:function(i,g,h,f){g.delegateHandle.detach()}},true);e.one(document).delegate("focus",function(f){var g=this.ancestor("form");if(g&&!g.getData(d)){g.publish(d,{broadcast:1});g.on("submit",function(h){return g.fire(d,h)});g.setData(d,true)}},"form input, form select, form button, form textarea")}},"0.0.3",{requires:["event-delegate","event-focus","event-synthetic"]});var a=["before","after","create","complete","success","failure"];YUI.add("rails-ujs",function(e){function c(f){e.Event.define(f,{on:function(i,g,h){g.handle=e.Global.on(f,function(j){if(e.Node.getDOMNode(j.target)==e.Node.getDOMNode(i)){h.fire.apply(h,arguments)}})},detach:function(h,g){g.handle.detach()},delegate:function(k,i,j,h){var g=e.delegate.compileFilter(h);i.handle=e.Global.on(f,function(l){if(g(l.target,{currentTarget:k})){j.fire.apply(j,arguments)}})},detachDelegate:function(j,h,i,g){h.handle.detach()}},true)}for(var d=0;d<a.length;d++){c("ajax:"+a[d])}e.Rails={};e.Rails.handleRemote=function(k){for(var j=0;j<a.length;j++){k.publish("ajax:"+a[j],{broadcast:2,emitFacade:true})}var h,g={};var f=k.fire("ajax:before");if(f==false){return false}if(k.get("tagName").toLowerCase()==="form"){g.method=k.get("method")||"post";h=k.get("action");if(!k.get("id")){k.setAttribute("id",e.guid("remoteForm"))}g.form={id:k.get("id")}}else{g.method=k.getAttribute("data-method")||"get";h=k.get("href")}g.on={start:function(l,i){k.fire("ajax:create",{},i)},complete:function(l,i){k.fire("ajax:complete",{},i)},success:function(l,i){k.fire("ajax:success",{},i)},failure:function(l,i){k.fire("ajax:failure",{},i)}};e.io(h,g);k.fire("ajax:after")};function b(g,f,h){g.insert(e.Node.create('<input type="hidden"/>').setAttrs({name:f,value:h}))}e.Rails.handleMethod=function(h){var k=h.getAttribute("data-method"),g=h.get("href"),i=e.one("meta[name=csrf-param]"),f=e.one("meta[name=csrf-token]");var j=e.Node.create('<form method="POST" style="display:none"></form>').setAttribute("action",g);h.get("parentNode").insert(j);if(k!=="post"){b(j,"_method",k)}if(i&&f){b(j,i.getAttribute("content"),f.getAttribute("content"))}j.submit()}},"0.0.3",{requires:["node-base","event-synthetic","node-event-delegate","selector-css3","io-form","rails-event-bubble"]});YUI().use("node-base","node-event-delegate","selector-css3","rails-ujs","rails-event-bubble",function(g){var f=g.one(document);f.delegate("click",function(j){var i=this.getAttribute("data-confirm");if(!(!i||confirm(i))){j.preventDefault();return false}},"a[data-confirm],input[data-confirm],button[data-confirm]");function b(i){g.Rails.handleRemote(this);i.preventDefault()}f.delegate("submit",b,"form[data-remote]");f.delegate("click",b,"a[data-remote]");function d(i){g.Rails.handleMethod(this);i.preventDefault()}f.delegate("click",d,"a[data-method]:not([data-remote])");var c="input[type=submit][data-disable-with]";function e(){this.all(c).each(function(i){i.setData("enable-with",i.get("value"));i.set("value",i.getAttribute("data-disable-with"));i.setAttribute("disabled","disabled")})}function h(){this.all(c).each(function(i){i.removeAttribute("disabled");i.set("value",i.getData("enable-with"))})}f.delegate("submit",e,"form:not([data-remote])");f.delegate("ajax:before",e,"form[data-remote]");f.delegate("ajax:complete",h,"form[data-remote]")})})();